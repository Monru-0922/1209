<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AR 互動 - 影片轉攝影視窗</title>

  <!-- A-Frame / MindAR / MediaPipe -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face-aframe.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
<div id="ar-viewport">

  <!-- ===============================
       INTRO 1（待機動畫）
  =============================== -->
  <div id="intro-container" class="full-screen-overlay">
    <video
      id="intro-video"
      src="Animation1.mp4"
      autoplay
      muted
      playsinline
      loop
      class="media-content"></video>
  </div>

  <!-- ===============================
       AR Scene（MindAR）
  =============================== -->
  <a-scene
    id="ar-scene"
    mindar-face="uiLoading:no; uiScanning:no; disableFaceMesh:true;"
    vr-mode-ui="enabled:false"
    renderer="colorManagement:true">
    <a-camera active="false"></a-camera>
  </a-scene>

  <!-- ===============================
       02 對準框
  =============================== -->
  <div id="camera-overlay">
    <img src="image/02.png" alt="">
  </div>

  <!-- ===============================
       03 掃描
  =============================== -->
  <div id="scan-overlay">
    <img id="scan-bg" src="image/03.png">
    <div id="scan-countdown">3</div>
    <div id="scan-bar"></div>
    <div id="scan-bar-2"></div>
  </div>

  <!-- ===============================
       04 生成評分表
  =============================== -->
  <div id="detect-finish-overlay">
    <img src="image/04.png">
  </div>

  <!-- ===============================
       05 評分表
  =============================== -->
  <div id="rating-overlay">
    <img src="image/05.png">
  </div>

  <!-- ===============================
       06 Popup 1
  =============================== -->
  <div id="low-score-overlay" class="overlay">
    <img src="image/Windows1.png">

    <button id="btn-off"  class="choice-btn choice-off"></button>
    <button id="btn-next" class="choice-btn choice-next"></button>
  </div>

  <!-- ===============================
       07 濾鏡頁（美妝 + 文字）
  =============================== -->
  <div id="filter-select-overlay">
    <div class="phone">
      <div class="camera-area">

        <!-- ===== 美妝濾鏡 ===== -->
        <div id="mk-stage" class="stage">
          <video id="mk-video" autoplay muted playsinline></video>
          <canvas id="mk-canvas"></canvas>

          <!-- ✅ 共用倒數（美妝 / 文字） -->
          <div id="mk-countdown">20</div>

          <img src="image/frame.png" class="frame-overlay frame-makeup">

          <div class="nav">
            <img src="image/bth.png">
            <img src="image/bth.png">
            <img src="image/bth.png">
            <img src="image/bth.png">
            <img src="image/bth.png">
          </div>
        </div>

        <!-- ===== 文字濾鏡 ===== -->
        <img id="filter-bg" class="filter-bg">
        <video id="filter-video" autoplay muted playsinline></video>
        <img id="faceOverlay" class="face-overlay">
        <img src="image/frame2.png" class="frame-overlay frame-text">

      </div>
    </div>
  </div>

  <!-- ===============================
       07 拍照完成
  =============================== -->
  <div id="photo-finish-overlay">
    <img id="ui-photo-finish" class="photo-finish-bg">
    <img src="image/07.png" class="photo-finish-frame">
  </div>

  <!-- ===============================
       07-2 OFF
  =============================== -->
  <div id="photo-off-overlay">
    <img src="image/07-2.png">
    <button id="btn-end-off">結束體驗</button>
  </div>

  <!-- ===============================
       Popup 2
  =============================== -->
  <div id="popup2-overlay" class="overlay">
    <img src="image/Windows2.png">
    <button id="btn-popup2-off"></button>
    <button id="btn-popup2-next"></button>
  </div>

  <!-- ===============================
       INTRO 2（動畫二）
  =============================== -->
  <div id="intro2-container" class="full-screen-overlay">
    <video
      id="intro2-video"
      src="Animation2.mp4"
      playsinline
      muted
      class="media-content"></video>
  </div>

  <!-- ===============================
       Popup 3
  =============================== -->
  <div id="popup3-overlay" class="overlay">
    <img src="image/Windows3.png">
    <button id="btn-popup3-off"></button>
    <button id="btn-popup3-next"></button>
  </div>

  <!-- ===============================
       IG 發文頁
  =============================== -->
<!-- 第 7 張：發文（假 IG 介面） -->
<div id="post-overlay">
  <!-- IG 背景（文字-08） -->
  <img id="post-bg" class="ig-page-bg" src="image/text2.png" alt="">

  <div class="post-black-bg"></div>

  <div class="ig-phone">
    <!-- TOP BAR -->
    <div class="top-bar">
      模範生 &gt;
      <span>POST</span>
    </div>

    <!-- STORY 區 -->
    <div class="stories">
      <div class="story">
        <div class="story-circle">
          <img src="image/bth.png" class="img-normal">
          <img src="image/red man.png" class="img-hover">
        </div>
        <div class="hover-tag">適合你</div>
        <p>MODEL1</p>
      </div>

      <div class="story">
        <div class="story-circle">
          <img src="image/bth.png" class="img-normal">
          <img src="image/red man.png" class="img-hover">
        </div>
        <div class="hover-tag">潛力股</div>
        <p>MODEL2</p>
      </div>

      <div class="story">
        <div class="story-circle">
          <img src="image/bth.png" class="img-normal">
          <img src="image/red man.png" class="img-hover">
        </div>
        <div class="hover-tag">高風險</div>
        <p>MODEL3</p>
      </div>

      <div class="story">
        <div class="story-circle">
          <img src="image/bth.png" class="img-normal">
          <img src="image/red man.png" class="img-hover">
        </div>
        <div class="hover-tag">推薦</div>
        <p>MODEL4</p>
      </div>

      <!-- 手機內結束體驗 -->
      <button id="btn-end-post-ig" class="btn-main btn-end-ig">
        結束體驗
      </button>
    </div>

    <!-- 貼文區 -->
    <div class="post">
      <div class="post-header">
        <img src="image/bth.png">
        <div class="info">
          <strong>MODEL1</strong><br>
          <small style="color:#bbb;">2026/08/07</small>
        </div>
      </div>

      <div class="post-img-wrap">
        <!-- 拍照結果 -->
        <img class="post-img" id="postImage">

        <!-- 分數 glitch -->
        <div class="glitch-score" id="glitchScore">
          最終分數：21分
        </div>
      </div>

      <div class="actions">
        <span id="likeBtn">♡</span>
        <span>💬</span>
      </div>

      <div class="likes-count" id="likesCount">0 likes</div>

      <div class="comments" id="commentsList"></div>

      <div class="comment-box">
        <input type="text" id="commentInput" placeholder="留言……">
        <button id="commentSendBtn">送出</button>
      </div>
    </div>
  </div>

  <!-- 外層結束體驗（CSS 會隱藏） -->
  <button id="btn-end-post">結束體驗</button>
</div>

<!-- ===============================
     JS
=============================== -->
<script src="script.js"></script>
<script src="makeup.js"></script>
<script src="textFilter.js"></script>
<script src="post.js"></script>

</body>
</html>